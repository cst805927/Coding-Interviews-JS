# 第 5 章 优化时间和空间效率

## 5.2 时间效率

- 习惯

  - 用指针的习惯

- 递归和循环的效率区别

  - 用递归的思路分析问题，

    写代码用数组来保存中间结果基于循环实现

- 数据结构和算法掌握程度

  - 查找
    - 顺序查找需要 O（n）
    - 排序数组需要 O（logn）
    - 哈希表需要 O（1）

- 敏捷的思维
  - 从不同角度去思考问题

### 面试题 39 ：数组中出现次数超过一半的数字

数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。

你可以假设数组是非空的，并且给定的数组总是存在多数元素。

------

#### 解法一 ：基于 Partition 函数的解法

- 数组的出现的次数超过了数组长度的一半

  如果把这个数组排序，

  那么排序之后位于数组中间的数字一定所求的数字

  - 这个数字是中位数

  - 这个数字就是长度为 n 的数组中第 n / 2 大的数字
  - O（n）求数组第 k 大的数字

- 随机快速排序的算法中

  - 先在数组中随机选择一个数字
  - 然后调整数组中的数字顺序
    - 使得比选中的数字小的在左边，大的在右边

- 如果选中的数字的下标刚好是 n / 2

  - 那么这个数字就是数组的中位数

- 如果它的下标大于 n / 2

  - 那么中位数在它的左边

  - 接着在它的左边查找

- 如果它的下标大于 n / 2

  - 中位数位于它的右边

  - 右边部分的数组中查找

- 用递归实现